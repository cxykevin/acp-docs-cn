---
title: "Schema"
description: "代理客户端协议的Schema定义"
---

## Agent

定义所有符合ACP的代理必须实现的接口。

代理是使用生成式AI自主修改代码的程序。它们处理来自客户端的请求，并使用语言模型和工具执行任务。

### <span class="font-mono">authenticate</span>

使用指定的认证方法对客户端进行认证。

当代理在允许创建会话之前需要认证时调用。客户端提供在初始化期间广告的认证方法ID。

成功认证后，客户端可以继续使用`new_session`创建会话，而不会收到`auth_required`错误。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

#### <span class="font-mono">AuthenticateRequest</span>

authenticate方法的请求参数。

指定要使用的认证方法。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="methodId" type={"string"} required>
  要使用的认证方法的ID。
必须是初始化响应中广告的方法之一。
</ResponseField>

#### <span class="font-mono">AuthenticateResponse</span>

authenticate方法的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

### <span class="font-mono">initialize</span>

与客户端建立连接并协商协议能力。

此方法在连接开始时调用一次，用于：

- 协商要使用的协议版本
- 在客户端和代理之间交换能力信息
- 确定可用的认证方法

代理应以其支持的协议版本和能力进行响应。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

#### <span class="font-mono">InitializeRequest</span>

initialize方法的请求参数。

由客户端发送以建立连接并协商能力。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="clientCapabilities" type={<a href="#clientcapabilities">ClientCapabilities</a>} >
  客户端支持的能力。

    - 默认值: `{"fs":{"readTextFile":false,"writeTextFile":false},"terminal":false}`

</ResponseField>
<ResponseField name="clientInfo" type={<><span><a href="#implementation">Implementation</a></span><span> | null</span></>} >
  发送给代理的客户端名称和版本信息。

注意：在未来版本的协议中，这将变为必填项。

</ResponseField>
<ResponseField name="protocolVersion" type={<a href="#protocolversion">ProtocolVersion</a>} required>
  客户端支持的最新协议版本。
</ResponseField>

#### <span class="font-mono">InitializeResponse</span>

initialize方法的响应。

包含协商后的协议版本和代理能力。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="agentCapabilities" type={<a href="#agentcapabilities">AgentCapabilities</a>} >
  代理支持的能力。

    - 默认值: `{"loadSession":false,"mcpCapabilities":{"http":false,"sse":false},"promptCapabilities":{"audio":false,"embeddedContext":false,"image":false},"sessionCapabilities":{}}`

</ResponseField>
<ResponseField name="agentInfo" type={<><span><a href="#implementation">Implementation</a></span><span> | null</span></>} >
  发送给客户端的代理名称和版本信息。

注意：在未来版本的协议中，这将变为必填项。

</ResponseField>
<ResponseField name="authMethods" type={<a href="#authmethod">AuthMethod[]</a>} >
  代理支持的认证方法。

    - 默认值: `[]`

</ResponseField>
<ResponseField name="protocolVersion" type={<a href="#protocolversion">ProtocolVersion</a>} required>
  如果客户端指定的版本受代理支持，则是该版本；否则是代理支持的最新协议版本。

如果客户端不支持此版本，应断开连接。

</ResponseField>

<a id="session-cancel"></a>
### <span class="font-mono">session/cancel</span>

取消会话的正在进行操作。

这是客户端发送的通知，用于取消正在进行的提示轮次。

收到此通知后，代理应：

- 尽快停止所有语言模型请求
- 中止所有正在进行的工具调用
- 发送任何待处理的`session/update`通知
- 使用`StopReason::Cancelled`响应原始的`session/prompt`请求

查看协议文档：[Cancellation](https://agentclientprotocol.com/protocol/prompt-turn#cancellation)

#### <span class="font-mono">CancelNotification</span>

取消会话正在进行的操作的通知。

查看协议文档：[Cancellation](https://agentclientprotocol.com/protocol/prompt-turn#cancellation)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要取消操作的会话ID。
</ResponseField>

<a id="session-load"></a>
### <span class="font-mono">session/load</span>

加载现有会话以恢复之前的对话。

仅在代理广告了`loadSession`能力时才可用。

代理应：

- 恢复会话上下文和对话历史
- 连接到指定的MCP服务器
- 通过通知将整个对话历史流式传输回客户端

查看协议文档：[Loading Sessions](https://agentclientprotocol.com/protocol/session-setup#loading-sessions)

#### <span class="font-mono">LoadSessionRequest</span>

加载现有会话的请求参数。

仅在代理支持`loadSession`能力时可用。

查看协议文档：[Loading Sessions](https://agentclientprotocol.com/protocol/session-setup#loading-sessions)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="cwd" type={"string"} required>
  此会话的工作目录。
</ResponseField>
<ResponseField name="mcpServers" type={<a href="#mcpserver">McpServer[]</a>} required>
  要为此会话连接的MCP服务器列表。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要加载的会话ID。
</ResponseField>

#### <span class="font-mono">LoadSessionResponse</span>

加载现有会话的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modes" type={<><span><a href="#sessionmodestate">SessionModeState</a></span><span> | null</span></>} >
  如果代理支持，初始模式状态

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

</ResponseField>

<a id="session-new"></a>
### <span class="font-mono">session/new</span>

创建与代理的新对话会话。

会话代表具有自己历史和状态的独立对话上下文。

代理应：

- 创建新的会话上下文
- 连接到任何指定的MCP服务器
- 返回唯一会话ID以供后续请求使用

如果代理需要认证，可能返回`auth_required`错误。

查看协议文档：[Session Setup](https://agentclientprotocol.com/protocol/session-setup)

#### <span class="font-mono">NewSessionRequest</span>

创建新会话的请求参数。

查看协议文档：[Creating a Session](https://agentclientprotocol.com/protocol/session-setup#creating-a-session)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="cwd" type={"string"} required>
  此会话的工作目录。必须是绝对路径。
</ResponseField>
<ResponseField name="mcpServers" type={<a href="#mcpserver">McpServer[]</a>} required>
  代理应连接的MCP（Model Context Protocol）服务器列表。
</ResponseField>

#### <span class="font-mono">NewSessionResponse</span>

创建新会话的响应。

查看协议文档：[Creating a Session](https://agentclientprotocol.com/protocol/session-setup#creating-a-session)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modes" type={<><span><a href="#sessionmodestate">SessionModeState</a></span><span> | null</span></>} >
  如果代理支持，初始模式状态

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  创建的会话的唯一标识符。

用于此对话的所有后续请求。

</ResponseField>

<a id="session-prompt"></a>
### <span class="font-mono">session/prompt</span>

在会话中处理用户提示。

此方法处理提示的整个生命周期：

- 接收带有可选上下文（文件、图像等）的用户消息
- 使用语言模型处理提示
- 向客户端报告语言模型内容和工具调用
- 请求运行工具的权限
- 执行任何请求的工具调用
- 在轮次完成时返回停止原因

查看协议文档：[Prompt Turn](https://agentclientprotocol.com/protocol/prompt-turn)

#### <span class="font-mono">PromptRequest</span>

向代理发送用户提示的请求参数。

包含用户消息和任何附加上下文。

查看协议文档：[User Message](https://agentclientprotocol.com/protocol/prompt-turn#1-user-message)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="prompt" type={<a href="#contentblock">ContentBlock[]</a>} required>
  组成用户消息的内容块。

作为基线，代理必须支持`ContentBlock::Text`和`ContentBlock::ResourceLink`，而其他变体通过`PromptCapabilities`可选启用。

客户端必须根据`PromptCapabilities`调整其界面。

客户端可以将引用的上下文片段作为`ContentBlock::Resource`或`ContentBlock::ResourceLink`包含。

如果可用，优先使用`ContentBlock::Resource`，因为它避免了额外的往返，并允许消息包含来自代理可能无法访问的源的上下文片段。

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要发送此用户消息的会话ID
</ResponseField>

#### <span class="font-mono">PromptResponse</span>

处理用户提示的响应。

查看协议文档：[Check for Completion](https://agentclientprotocol.com/protocol/prompt-turn#4-check-for-completion)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="stopReason" type={<a href="#stopreason">StopReason</a>} required>
  指示代理停止处理轮次的原因。
</ResponseField>

<a id="session-set_mode"></a>
### <span class="font-mono">session/set_mode</span>

设置会话的当前模式。

允许在不同的代理模式之间切换（例如"ask"、"architect"、"code"），这些模式会影响系统提示、工具可用性和权限行为。

模式必须是会话创建或加载期间在`availableModes`中广告的模式之一。代理也可以自主更改模式，并通过`current_mode_update`通知通知客户端。

此方法可以在会话期间随时调用，无论代理是空闲还是正在主动生成响应。

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

#### <span class="font-mono">SetSessionModeRequest</span>

设置会话模式的请求参数。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modeId" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  要设置的模式的ID。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要设置模式的会话ID。
</ResponseField>

#### <span class="font-mono">SetSessionModeResponse</span>

`session/set_mode`方法的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"}></ResponseField>

## Client

定义符合ACP的客户端必须实现的接口。

客户端通常是代码编辑器（IDE、文本编辑器），提供用户与AI代理之间的接口。它们管理环境、处理用户交互并控制资源访问。

<a id="fs-read_text_file"></a>
### <span class="font-mono">fs/read_text_file</span>

读取客户端文件系统中的文本文件内容。

仅在客户端广告了`fs.readTextFile`能力时可用。允许代理访问客户端环境中的文件内容。

查看协议文档：[Client](https://agentclientprotocol.com/protocol/overview#client)

#### <span class="font-mono">ReadTextFileRequest</span>

读取文本文件内容的请求。

仅在客户端支持`fs.readTextFile`能力时可用。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="limit" type={"integer | null"} >
  要读取的最大行数。

    - 最小值: `0`

</ResponseField>
<ResponseField name="line" type={"integer | null"} >
  开始读取的行号（从1开始）。

    - 最小值: `0`

</ResponseField>
<ResponseField name="path" type={"string"} required>
  要读取的文件的绝对路径。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">ReadTextFileResponse</span>

包含文本文件内容的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={"string"} required>
</ResponseField>

<a id="fs-write_text_file"></a>
### <span class="font-mono">fs/write_text_file</span>

写入客户端文件系统中的文本文件内容。

仅在客户端广告了`fs.writeTextFile`能力时可用。允许代理在客户端环境中创建或修改文件。

查看协议文档：[Client](https://agentclientprotocol.com/protocol/overview#client)

#### <span class="font-mono">WriteTextFileRequest</span>

写入文本文件内容的请求。

仅在客户端支持`fs.writeTextFile`能力时可用。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={"string"} required>
  要写入文件的文本内容。
</ResponseField>
<ResponseField name="path" type={"string"} required>
  要写入的文件的绝对路径。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">WriteTextFileResponse</span>

`fs/write_text_file`的响应

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="session-request_permission"></a>
### <span class="font-mono">session/request_permission</span>

请求用户对工具调用操作的许可。

当代理需要在执行敏感操作之前获得用户授权时由代理调用。客户端应向用户展示选项并返回其决定。

如果客户端通过`session/cancel`取消提示轮次，它必须使用`RequestPermissionOutcome::Cancelled`响应此请求。

查看协议文档：[Requesting Permission](https://agentclientprotocol.com/protocol/tool-calls#requesting-permission)

#### <span class="font-mono">RequestPermissionRequest</span>

执行工具调用的用户许可请求。

当代理需要在执行敏感操作之前获得授权时发送。

查看协议文档：[Requesting Permission](https://agentclientprotocol.com/protocol/tool-calls#requesting-permission)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="options" type={<a href="#permissionoption">PermissionOption[]</a>} required>
  用户可选择的可用权限选项。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="toolCall" type={<a href="#toolcallupdate">ToolCallUpdate</a>} required>
  需要权限的工具调用的详细信息。
</ResponseField>

#### <span class="font-mono">RequestPermissionResponse</span>

权限请求的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="outcome" type={<a href="#requestpermissionoutcome">RequestPermissionOutcome</a>} required>
  用户对权限请求的决定。
</ResponseField>

<a id="session-update"></a>
### <span class="font-mono">session/update</span>

处理来自代理的会话更新通知。

这是一个通知端点（不期望响应），接收关于会话进度的实时更新，包括消息块、工具调用和执行计划。

注意：客户端应在发送`session/cancel`通知后继续接受工具调用更新，因为代理可能在使用取消的停止原因响应之前发送最终更新。

查看协议文档：[Agent Reports Output](https://agentclientprotocol.com/protocol/prompt-turn#3-agent-reports-output)

#### <span class="font-mono">SessionNotification</span>

包含来自代理的会话更新的通知。

用于在提示处理期间流式传输实时进度和结果。

查看协议文档：[Agent Reports Output](https://agentclientprotocol.com/protocol/prompt-turn#3-agent-reports-output)

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此更新所属的会话ID。
</ResponseField>
<ResponseField name="update" type={<a href="#sessionupdate">SessionUpdate</a>} required>
  实际的更新内容。
</ResponseField>

<a id="terminal-create"></a>
### <span class="font-mono">terminal/create</span>

在新终端中执行命令

仅在`terminal`客户端能力设置为`true`时可用。

返回可用于其他终端方法的`TerminalId`，以获取当前输出、等待退出和终止命令。

`TerminalId`也可以通过使用`ToolCallContent::Terminal`变体嵌入到工具调用中。

代理负责通过使用`terminal/release`方法释放终端。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">CreateTerminalRequest</span>

创建新终端并执行命令的请求。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="args" type={<><span>"string"</span><span>[]</span></>} >
  命令参数数组。
</ResponseField>
<ResponseField name="command" type={"string"} required>
  要执行的命令。
</ResponseField>
<ResponseField name="cwd" type={"string | null"} >
  命令的工作目录（绝对路径）。
</ResponseField>
<ResponseField name="env" type={<a href="#envvariable">EnvVariable[]</a>} >
  命令的环境变量。
</ResponseField>
<ResponseField name="outputByteLimit" type={"integer | null"} >
  要保留的最大输出字节数。

当超出限制时，客户端从输出开头截断以保持在限制内。

客户端必须确保在字符边界处进行截断以保持有效的字符串输出，即使这意味着保留的输出略小于指定限制。

    - 最小值: `0`

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">CreateTerminalResponse</span>

包含创建的终端ID的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  创建的终端的唯一标识符。
</ResponseField>

<a id="terminal-kill"></a>
### <span class="font-mono">terminal/kill</span>

终止终端命令而不释放终端

虽然`terminal/release`也会终止命令，但此方法将保持`TerminalId`有效，以便可以与其他方法一起使用。

此方法在实现命令超时时很有帮助，这些超时会在时间到达后立即终止命令，然后获取最终输出以便发送给模型。

注意：当`TerminalId`不再需要时，使用`terminal/release`。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">KillTerminalCommandRequest</span>

终止终端命令而不释放终端的请求。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要终止的终端的ID。
</ResponseField>

#### <span class="font-mono">KillTerminalCommandResponse</span>

终端/kill命令方法的响应

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="terminal-output"></a>
### <span class="font-mono">terminal/output</span>

获取终端输出和退出状态

返回终端中的当前内容，而不等待命令退出。如果命令已经退出，则包含退出状态。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">TerminalOutputRequest</span>

获取终端当前输出和状态的请求。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要获取输出的终端ID。
</ResponseField>

#### <span class="font-mono">TerminalOutputResponse</span>

包含终端输出和退出状态的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="exitCode" type={"integer | null"} required>
  命令的退出代码。如果命令尚未退出则为null。
</ResponseField>
<ResponseField name="output" type={"string"} required>
  终端的输出内容。
</ResponseField>

<a id="terminal-release"></a>
### <span class="font-mono">terminal/release</span>

释放终端资源

当代理完成终端使用后应调用此方法。它会终止命令并清理与终端关联的资源。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">ReleaseTerminalRequest</span>

释放终端资源的请求。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要释放的终端ID。
</ResponseField>

#### <span class="font-mono">ReleaseTerminalResponse</span>

终端/release命令方法的响应

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="terminal-wait"></a>
### <span class="font-mono">terminal/wait</span>

等待终端命令完成

阻塞直到命令退出，返回最终的输出和退出状态。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">WaitTerminalCommandRequest</span>

等待终端命令完成的请求。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要等待的终端ID。
</ResponseField>

#### <span class="font-mono">WaitTerminalCommandResponse</span>

等待终端命令完成的响应。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="exitCode" type={"integer | null"} required>
  命令的退出代码。
</ResponseField>
<ResponseField name="output" type={"string"} required>
  命令的最终输出。
</ResponseField>

## 类型定义

<a id="agentcapabilities"></a>
### <span class="font-mono">AgentCapabilities</span>

代理支持的能力。

**类型:** Object

**属性:**

<ResponseField name="loadSession" type={"boolean"} >
  代理是否支持加载现有会话。

默认: `false`
</ResponseField>
<ResponseField name="mcpCapabilities" type={"object"} >
  MCP相关能力。

    - Default: `{"http":false,"sse":false}`
</ResponseField>
<ResponseField name="promptCapabilities" type={<a href="#promptcapabilities">PromptCapabilities</a>} >
  提示相关能力。

    - Default: `{"audio":false,"embeddedContext":false,"image":false}`
</ResponseField>
<ResponseField name="sessionCapabilities" type={<a href="#sessioncapabilities">SessionCapabilities</a>} >
  会话相关能力。

    - Default: `{}`
</ResponseField>

<a id="authmethod"></a>
### <span class="font-mono">AuthMethod</span>

可用的认证方法。

**类型:** Object

**属性:**

<ResponseField name="id" type={"string"} required>
  认证方法的唯一标识符。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  认证方法的用户友好名称。
</ResponseField>

<a id="clientcapabilities"></a>
### <span class="font-mono">ClientCapabilities</span>

客户端支持的能力。

**类型:** Object

**属性:**

<ResponseField name="fs" type={"object"} >
  文件系统能力。

    - Default: `{"readTextFile":false,"writeTextFile":false}`
</ResponseField>
<ResponseField name="terminal" type={"boolean"} >
  终端能力。

默认: `false`
</ResponseField>

<a id="contentblock"></a>
### <span class="font-mono">ContentBlock</span>

组成消息的内容块。代理必须支持Text和ResourceLink，其他类型可选。

**类型:** Object

**属性:**

<ResponseField name="text" type={"string"} required>
  文本内容。
</ResponseField>
<ResponseField name="type" type={"string"} required>
  内容块类型：`text`、`resource`、`resourceLink`、`image`、`audio`。
</ResponseField>

<a id="envvariable"></a>
### <span class="font-mono">EnvVariable</span>

环境变量定义。

**类型:** Object

**属性:**

<ResponseField name="name" type={"string"} required>
  环境变量名称。
</ResponseField>
<ResponseField name="value" type={"string"} required>
  环境变量值。
</ResponseField>

<a id="implementation"></a>
### <span class="font-mono">Implementation</span>

实现信息（名称和版本）。

**类型:** Object

**属性:**

<ResponseField name="name" type={"string"} required>
  实现名称。
</ResponseField>
<ResponseField name="version" type={"string"} required>
  实现版本。
</ResponseField>

<a id="mcpserver"></a>
### <span class="font-mono">McpServer</span>

MCP服务器配置。

**类型:** Object

**属性:**

<ResponseField name="url" type={"string"} required>
  MCP服务器的URL。
</ResponseField>

<a id="permissionoption"></a>
### <span class="font-mono">PermissionOption</span>

权限请求选项。

**类型:** Object

**属性:**

<ResponseField name="description" type={"string"} required>
  选项的描述。
</ResponseField>
<ResponseField name="id" type={"string"} required>
  选项的唯一标识符。
</ResponseField>
<ResponseField name="label" type={"string"} required>
  选项的标签。
</ResponseField>

<a id="promptcapabilities"></a>
### <span class="font-mono">PromptCapabilities</span>

提示能力配置。

**类型:** Object

**属性:**

<ResponseField name="audio" type={"boolean"} >
  是否支持音频内容。

默认: `false`
</ResponseField>
<ResponseField name="embeddedContext" type={"boolean"} >
  是否支持嵌入上下文。

默认: `false`
</ResponseField>
<ResponseField name="image" type={"boolean"} >
  是否支持图像内容。

默认: `false`
</ResponseField>

<a id="protocolversion"></a>
### <span class="font-mono">ProtocolVersion</span>

协议版本标识符。

**类型:** Object

**属性:**

<ResponseField name="major" type={"integer"} required>
  主版本号。
</ResponseField>
<ResponseField name="minor" type={"integer"} required>
  次版本号。
</ResponseField>

<a id="requestpermissionoutcome"></a>
### <span class="font-mono">RequestPermissionOutcome</span>

权限请求结果。

**类型:** String

**可选值:**

- `granted`
- `denied`
- `cancelled`
- `高高`
- `oneShot`

<a id="sessioncapabilities"></a>
### <span class="font-mono">SessionCapabilities</span>

会话能力配置。

**类型:** Object

**属性:**

<ResponseField name="editContext" type={"boolean"} >
  是否支持编辑上下文。

默认: `false`
</ResponseField>

<a id="sessionid"></a>
### <span class="font-mono">SessionId</span>

会话唯一标识符。

**类型:** String

<a id="sessionmode"></a>
### <span class="font-mono">SessionMode</span>

会话模式定义。

**类型:** Object

**属性:**

<ResponseField name="id" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  模式ID。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  模式名称。
</ResponseField>

<a id="sessionmodeid"></a>
### <span class="font-mono">SessionModeId</span>

会话模式标识符。

**类型:** String

<a id="sessionmodestate"></a>
### <span class="font-mono">SessionModeState</span>

会话模式状态。

**类型:** Object

**属性:**

<ResponseField name="availableModes" type={<a href="#sessionmode">SessionMode[]</a>} required>
  可用的会话模式列表。
</ResponseField>
<ResponseField name="currentMode" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  当前会话模式ID。
</ResponseField>

<a id="sessionupdate"></a>
### <span class="font-mono">SessionUpdate</span>

会话更新内容。

**类型:** Object

**属性:**

<ResponseField name="message" type={<a href="#contentblock">ContentBlock[]</a>} >
  消息内容块。
</ResponseField>
<ResponseField name="type" type={"string"} required>
  更新类型：`message`、`tool_calls`、`tool_calls_remaining`、`agent_plan`、`current_mode_update`。
</ResponseField>

<a id="stopreason"></a>
### <span class="font-mono">StopReason</span>

代理停止处理的原因。

**类型:** String

**可选值:**

- `completed`
- `cancelled`
- `error`
- `timeout`

<a id="toolcall"></a>
### <span class="font-mono">ToolCall</span>

工具调用定义。

**类型:** Object

**属性:**

<ResponseField name="id" type={"string"} required>
  工具调用ID。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  工具名称。
</ResponseField>
<ResponseField name="params" type={"object"} required>
  工具参数。
</ResponseField>

<a id="toolcallcontent"></a>
### <span class="font-mono">ToolCallContent</span>

工具调用内容。

**类型:** Object

**属性:**

<p>**工具调用内容可以是以下类型之一：**</p>

**终端** (Terminal):

<ResponseField name="terminalId" type={"string"} required>
  终端ID。
</ResponseField>
<ResponseField name="type" type={"string"} required>
  设为 `"terminal"`
</ResponseField>

**文本** (Text):

<ResponseField name="text" type={"string"} required>
  工具调用的文本表示。
</ResponseField>
<ResponseField name="type" type={"string"} required>
  设为 `"text"`
</ResponseField>

<a id="toolcallresult"></a>
### <span class="font-mono">ToolCallResult</span>

工具调用结果。

**类型:** Object

**属性:**

<ResponseField name="content" type={<a href="#toolcallcontent">ToolCallContent</a>} required>
  工具调用结果内容。
</ResponseField>
<ResponseField name="isError" type={"boolean"} >
  调用是否出错。

默认: `false`
</ResponseField>

<a id="toolcallupdate"></a>
### <span class="font-mono">ToolCallUpdate</span>

工具调用更新。

**类型:** Object

**属性:**

<ResponseField name="content" type={<a href="#toolcallcontent">ToolCallContent</a>} >
  工具调用的内容。
</ResponseField>
<null>是否完整。</null>
</ResponseField>
<ResponseField name="requestPermission" type={<a href="#permissionoption">PermissionOption[]</a>} >
  权限请求选项。
</ResponseField>
<ResponseField name="result" type={<a href="#toolcallresult">ToolCallResult</a>} >
  工具调用结果。
</ResponseField>
<ResponseField name="status" type={"string"} required>
  工具调用状态：`pending`、`in_progress`、`result`、`errors`。
</ResponseField>
<ResponseField name="toolCallId" type={"string"} required>
  工具调用ID。
</ResponseField>
