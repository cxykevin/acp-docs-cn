---
title: "Schema"
description: "代理客户端协议的Schema定义"
---

## Agent

定义所有符合ACP的代理必须实现的接口。

代理是使用生成式AI自主修改代码的程序。它们处理来自客户端的请求，并使用语言模型和工具执行任务。

### <span class="font-mono">authenticate</span>

使用指定的认证方法对客户端进行认证。

当代理在允许创建会话之前需要认证时调用。客户端提供在初始化期间广告的认证方法ID。

成功认证后，客户端可以继续使用`new_session`创建会话，而不会收到`auth_required`错误。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

#### <span class="font-mono">AuthenticateRequest</span>

authenticate方法的请求参数。

指定要使用的认证方法。

**类型:** Object

**属性:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="methodId" type={"string"} required>
  要使用的认证方法的ID。
必须是初始化响应中广告的方法之一。
</ResponseField>

#### <span class="font-mono">AuthenticateResponse</span>

Response to the `authenticate` method.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

### <span class="font-mono">initialize</span>

与客户端建立连接并协商协议能力。

This method is called once at the beginning of the connection to:

- Negotiate the protocol version to use
- Exchange capability information between client and agent
- Determine available authentication methods

代理应使用其支持的协议版本和能力进行响应。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

#### <span class="font-mono">InitializeRequest</span>

初始化方法的请求参数。

由客户端发送以建立连接和协商能力。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="clientCapabilities" type={<a href="#clientcapabilities">ClientCapabilities</a>} >
  客户端支持的能力。

    - Default: `{"fs":{"readTextFile":false,"writeTextFile":false},"terminal":false}`

</ResponseField>
<ResponseField name="clientInfo" type={<><span><a href="#implementation">Implementation</a></span><span> | null</span></>} >
  发送给代理的客户端名称和版本信息。

Note: in future versions of the protocol, this will be required.

</ResponseField>
<ResponseField name="protocolVersion" type={<a href="#protocolversion">ProtocolVersion</a>} required>
  客户端支持的最新协议版本。
</ResponseField>

#### <span class="font-mono">InitializeResponse</span>

Response to the `initialize` method.

包含协商的协议版本和代理能力。

查看协议文档：[Initialization](https://agentclientprotocol.com/protocol/initialization)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="agentCapabilities" type={<a href="#agentcapabilities">AgentCapabilities</a>} >
  代理支持的能力。

    - Default: `{"loadSession":false,"mcpCapabilities":{"http":false,"sse":false},"promptCapabilities":{"audio":false,"embeddedContext":false,"image":false},"sessionCapabilities":{}}`

</ResponseField>
<ResponseField name="agentInfo" type={<><span><a href="#implementation">Implementation</a></span><span> | null</span></>} >
  发送给客户端的代理名称和版本信息。

Note: in future versions of the protocol, this will be required.

</ResponseField>
<ResponseField name="authMethods" type={<a href="#authmethod">AuthMethod[]</a>} >
  代理支持的认证方法。

    - Default: `[]`

</ResponseField>
<ResponseField name="protocolVersion" type={<a href="#protocolversion">ProtocolVersion</a>} required>
  The protocol version the client specified if supported by the agent,
或代理支持的最新协议版本。

The client should disconnect, if it doesn't support this version.

</ResponseField>

<a id="session-cancel"></a>
### <span class="font-mono">session/cancel</span>

取消会话的正在进行操作。

这是客户端发送的通知，用于取消正在进行的提示轮次。

Upon receiving this notification, the Agent SHOULD:

- Stop all language model requests as soon as possible
- Abort all tool call invocations in progress
- Send any pending `session/update` notifications
- Respond to the original `session/prompt` request with `StopReason::Cancelled`

查看协议文档：[Cancellation](https://agentclientprotocol.com/protocol/prompt-turn#cancellation)

#### <span class="font-mono">CancelNotification</span>

取消会话正在进行操作的通知。

查看协议文档：[Cancellation](https://agentclientprotocol.com/protocol/prompt-turn#cancellation)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要取消操作的会话ID。
</ResponseField>

<a id="session-load"></a>
### <span class="font-mono">session/load</span>

加载现有会话以恢复之前的对话。

This method is only available if the agent advertises the `loadSession` capability.

The agent should:

- Restore the session context and conversation history
- Connect to the specified MCP servers
- Stream the entire conversation history back to the client via notifications

查看协议文档：[Loading Sessions](https://agentclientprotocol.com/protocol/session-setup#loading-sessions)

#### <span class="font-mono">LoadSessionRequest</span>

加载现有会话的请求参数。

Only available if the Agent supports the `loadSession` capability.

查看协议文档：[Loading Sessions](https://agentclientprotocol.com/protocol/session-setup#loading-sessions)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="cwd" type={"string"} required>
  此会话的工作目录。
</ResponseField>
<ResponseField name="mcpServers" type={<a href="#mcpserver">McpServer[]</a>} required>
  此会话要连接的MCP服务器列表。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要加载的会话ID。
</ResponseField>

#### <span class="font-mono">LoadSessionResponse</span>

加载现有会话的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modes" type={<><span><a href="#sessionmodestate">SessionModeState</a></span><span> | null</span></>} >
  如果代理支持，则为初始模式状态

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

</ResponseField>

<a id="session-new"></a>
### <span class="font-mono">session/new</span>

与代理创建新的对话会话。

会话表示具有自己历史和状态的独立对话上下文。

The agent should:

- Create a new session context
- Connect to any specified MCP servers
- Return a unique session ID for future requests

May return an `auth_required` error if the agent requires authentication.

查看协议文档：[Session Setup](https://agentclientprotocol.com/protocol/session-setup)

#### <span class="font-mono">NewSessionRequest</span>

创建新会话的请求参数。

查看协议文档：[Creating a Session](https://agentclientprotocol.com/protocol/session-setup#creating-a-session)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="cwd" type={"string"} required>
  此会话的工作目录。 Must be an absolute path.
</ResponseField>
<ResponseField name="mcpServers" type={<a href="#mcpserver">McpServer[]</a>} required>
  代理应连接的MCP（Model Context Protocol）服务器列表。
</ResponseField>

#### <span class="font-mono">NewSessionResponse</span>

创建新会话的响应。

查看协议文档：[Creating a Session](https://agentclientprotocol.com/protocol/session-setup#creating-a-session)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modes" type={<><span><a href="#sessionmodestate">SessionModeState</a></span><span> | null</span></>} >
  如果代理支持，则为初始模式状态

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  创建会话的唯一标识符。

用于此对话的所有后续请求。

</ResponseField>

<a id="session-prompt"></a>
### <span class="font-mono">session/prompt</span>

在会话中处理用户提示。

This method handles the whole lifecycle of a prompt:

- Receives user messages with optional context (files, images, etc.)
- Processes the prompt using language models
- Reports language model content and tool calls to the Clients
- Requests permission to run tools
- Executes any requested tool calls
- Returns when the turn is complete with a stop reason

查看协议文档：[Prompt Turn](https://agentclientprotocol.com/protocol/prompt-turn)

#### <span class="font-mono">PromptRequest</span>

向代理发送用户提示的请求参数。

Contains the user's message and any additional context.

查看协议文档：[User Message](https://agentclientprotocol.com/protocol/prompt-turn#1-user-message)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="prompt" type={<a href="#contentblock">ContentBlock[]</a>} required>
  The blocks of content that compose the user's message.

As a baseline, the Agent MUST support `ContentBlock::Text` and `ContentBlock::ResourceLink`,
while other variants are optionally enabled via `PromptCapabilities`.

The Client MUST adapt its interface according to `PromptCapabilities`.

The client MAY include referenced pieces of context as either
`ContentBlock::Resource` or `ContentBlock::ResourceLink`.

When available, `ContentBlock::Resource` is preferred
as it avoids extra round-trips and allows the message to include
pieces of context from sources the agent may not have access to.

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  发送此用户消息的会话ID
</ResponseField>

#### <span class="font-mono">PromptResponse</span>

处理用户提示的响应。

查看协议文档：[Check for Completion](https://agentclientprotocol.com/protocol/prompt-turn#4-check-for-completion)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="stopReason" type={<a href="#stopreason">StopReason</a>} required>
  指示代理停止处理轮次的原因。
</ResponseField>

<a id="session-set_mode"></a>
### <span class="font-mono">session/set_mode</span>

设置会话的当前模式。

Allows switching between different agent modes (e.g., "ask", "architect", "code")
that affect system prompts, tool availability, and permission behaviors.

The mode must be one of the modes advertised in `availableModes` during session
creation or loading. Agents may also change modes autonomously and notify the
client via `current_mode_update` notifications.

This method can be called at any time during a session, whether the Agent is
idle or actively generating a response.

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

#### <span class="font-mono">SetSessionModeRequest</span>

设置会话模式的请求参数。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="modeId" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  要设置的模式ID。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  要设置模式的会话ID。
</ResponseField>

#### <span class="font-mono">SetSessionModeResponse</span>

Response to `session/set_mode` method.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"}></ResponseField>

## Client

定义符合ACP的客户端必须实现的接口。

Clients are typically code editors (IDEs, text editors) that provide the interface
between users and AI agents. They manage the environment, handle user interactions,
and control access to resources.

<a id="fs-read_text_file"></a>
### <span class="font-mono">fs/read_text_file</span>

Reads content from a text file in the client's file system.

Only available if the client advertises the `fs.readTextFile` capability.
Allows the agent to access file contents within the client's environment.

查看协议文档：[Client](https://agentclientprotocol.com/protocol/overview#client)

#### <span class="font-mono">ReadTextFileRequest</span>

从文本文件读取内容的请求。

Only available if the client supports the `fs.readTextFile` capability.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="limit" type={"integer | null"} >
  要读取的最大行数。

    - Minimum: `0`

</ResponseField>
<ResponseField name="line" type={"integer | null"} >
  开始读取的行号（从1开始）。

    - Minimum: `0`

</ResponseField>
<ResponseField name="path" type={"string"} required>
  要读取文件的绝对路径。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">ReadTextFileResponse</span>

包含文本文件内容的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={"string"} required>
</ResponseField>

<a id="fs-write_text_file"></a>
### <span class="font-mono">fs/write_text_file</span>

Writes content to a text file in the client's file system.

Only available if the client advertises the `fs.writeTextFile` capability.
Allows the agent to create or modify files within the client's environment.

查看协议文档：[Client](https://agentclientprotocol.com/protocol/overview#client)

#### <span class="font-mono">WriteTextFileRequest</span>

将内容写入文本文件的请求。

Only available if the client supports the `fs.writeTextFile` capability.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={"string"} required>
  要写入文件的文本内容。
</ResponseField>
<ResponseField name="path" type={"string"} required>
  要写入文件的绝对路径。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">WriteTextFileResponse</span>

Response to `fs/write_text_file`

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="session-request_permission"></a>
### <span class="font-mono">session/request_permission</span>

请求用户对工具调用操作的权限。

Called by the agent when it needs user authorization before executing
a potentially sensitive operation. The client should present the options
to the user and return their decision.

If the client cancels the prompt turn via `session/cancel`, it MUST
respond to this request with `RequestPermissionOutcome::Cancelled`.

查看协议文档：[Requesting Permission](https://agentclientprotocol.com/protocol/tool-calls#requesting-permission)

#### <span class="font-mono">RequestPermissionRequest</span>

执行工具调用的用户权限请求。

当代理在执行敏感操作之前需要授权时发送。

查看协议文档：[Requesting Permission](https://agentclientprotocol.com/protocol/tool-calls#requesting-permission)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="options" type={<a href="#permissionoption">PermissionOption[]</a>} required>
  用户可选择的可用权限选项。
</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="toolCall" type={<a href="#toolcallupdate">ToolCallUpdate</a>} required>
  需要权限的工具调用的详细信息。
</ResponseField>

#### <span class="font-mono">RequestPermissionResponse</span>

权限请求的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="outcome" type={<a href="#requestpermissionoutcome">RequestPermissionOutcome</a>} required>
  The user's decision on the permission request.
</ResponseField>

<a id="session-update"></a>
### <span class="font-mono">session/update</span>

处理来自代理的会话更新通知。

This is a notification endpoint (no response expected) that receives
real-time updates about session progress, including message chunks,
tool calls, and execution plans.

Note: Clients SHOULD continue accepting tool call updates even after
sending a `session/cancel` notification, as the agent may send final
updates before responding with the cancelled stop reason.

查看协议文档：[Agent Reports Output](https://agentclientprotocol.com/protocol/prompt-turn#3-agent-reports-output)

#### <span class="font-mono">SessionNotification</span>

包含代理会话更新的通知。

用于在提示处理期间流式传输实时进度和结果。

查看协议文档：[Agent Reports Output](https://agentclientprotocol.com/protocol/prompt-turn#3-agent-reports-output)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此更新相关的会话ID。
</ResponseField>
<ResponseField name="update" type={<a href="#sessionupdate">SessionUpdate</a>} required>
  实际的更新内容。
</ResponseField>

<a id="terminal-create"></a>
### <span class="font-mono">terminal/create</span>

在新终端中执行命令

Only available if the `terminal` Client capability is set to `true`.

Returns a `TerminalId` that can be used with other terminal methods
to get the current output, wait for exit, and kill the command.

The `TerminalId` can also be used to embed the terminal in a tool call
by using the `ToolCallContent::Terminal` variant.

The Agent is responsible for releasing the terminal by using the `terminal/release`
method.

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">CreateTerminalRequest</span>

创建新终端并执行命令的请求。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="args" type={<><span>"string"</span><span>[]</span></>} >
  命令参数数组。
</ResponseField>
<ResponseField name="command" type={"string"} required>
  要执行的命令。
</ResponseField>
<ResponseField name="cwd" type={"string | null"} >
  命令的工作目录（绝对路径）。
</ResponseField>
<ResponseField name="env" type={<a href="#envvariable">EnvVariable[]</a>} >
  命令的环境变量。
</ResponseField>
<ResponseField name="outputByteLimit" type={"integer | null"} >
  要保留的最大输出字节数。

When the limit is exceeded, the Client truncates from the beginning of the output
to stay within the limit.

The Client MUST ensure truncation happens at a character boundary to maintain valid
string output, even if this means the retained output is slightly less than the
specified limit.

    - Minimum: `0`

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>

#### <span class="font-mono">CreateTerminalResponse</span>

包含创建的终端ID的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  创建的终端的唯一标识符。
</ResponseField>

<a id="terminal-kill"></a>
### <span class="font-mono">terminal/kill</span>

终止终端命令而不释放终端

While `terminal/release` will also kill the command, this method will keep
the `TerminalId` valid so it can be used with other methods.

This method can be helpful when implementing command timeouts which terminate
the command as soon as elapsed, and then get the final output so it can be sent
to the model.

Note: `terminal/release` when `TerminalId` is no longer needed.

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">KillTerminalCommandRequest</span>

终止终端命令而不释放终端的请求。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要终止的终端ID。
</ResponseField>

#### <span class="font-mono">KillTerminalCommandResponse</span>

对terminal/kill命令方法的响应

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="terminal-output"></a>
### <span class="font-mono">terminal/output</span>

获取终端输出和退出状态

返回终端中的当前内容而不等待命令退出。
如果命令已退出，则包含退出状态。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">TerminalOutputRequest</span>

获取终端当前输出和状态的请求。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要获取输出的终端ID。
</ResponseField>

#### <span class="font-mono">TerminalOutputResponse</span>

包含终端输出和退出状态的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="exitStatus" type={<><span><a href="#terminalexitstatus">TerminalExitStatus</a></span><span> | null</span></>} >
  命令完成时的退出状态。
</ResponseField>
<ResponseField name="output" type={"string"} required>
  到目前为止捕获的终端输出。
</ResponseField>
<ResponseField name="truncated" type={"boolean"} required>
  输出是否因字节限制而被截断。
</ResponseField>

<a id="terminal-release"></a>
### <span class="font-mono">terminal/release</span>

释放终端

如果命令尚未退出，则将其终止。使用 terminal/wait_for_exit
在释放终端之前等待命令退出。

释放后，TerminalId不能再与其他 terminal/* 方法一起使用，
但已经包含它的工具调用将继续显示其输出。

terminal/kill方法可用于终止命令而不释放终端，
从而允许代理调用 terminal/output 和其他方法。

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">ReleaseTerminalRequest</span>

Request to release a terminal and free its resources.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  The ID of the terminal to release.
</ResponseField>

#### <span class="font-mono">ReleaseTerminalResponse</span>

Response to terminal/release method

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

<a id="terminal-wait_for_exit"></a>
### <span class="font-mono">terminal/wait_for_exit</span>

等待终端命令退出并返回其退出状态

查看协议文档：[Terminals](https://agentclientprotocol.com/protocol/terminals)

#### <span class="font-mono">WaitForTerminalExitRequest</span>

等待终端命令退出的请求。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="sessionId" type={<a href="#sessionid">SessionId</a>} required>
  此请求的会话ID。
</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
  要等待的终端ID。
</ResponseField>

#### <span class="font-mono">WaitForTerminalExitResponse</span>

包含终端命令退出状态的响应。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="exitCode" type={"integer | null"} >
  进程退出代码（如果被信号终止可能为null）。

    - Minimum: `0`

</ResponseField>
<ResponseField name="signal" type={"string | null"} >
  终止进程的信号（如果正常退出可能为null）。
</ResponseField>

## <span class="font-mono">AgentCapabilities</span>

代理支持的能力。

在初始化期间广告，以告知客户端可用的功能和内容类型。

查看协议文档：[Agent Capabilities](https://agentclientprotocol.com/protocol/initialization#agent-capabilities)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="loadSession" type={"boolean"} >
  代理是否支持 session/load。

    - Default: `false`

</ResponseField>
<ResponseField name="mcpCapabilities" type={<a href="#mcpcapabilities">McpCapabilities</a>} >
  代理支持的MCP能力。

    - Default: `{"http":false,"sse":false}`

</ResponseField>
<ResponseField name="promptCapabilities" type={<a href="#promptcapabilities">PromptCapabilities</a>} >
  代理支持的提示能力。

    - Default: `{"audio":false,"embeddedContext":false,"image":false}`

</ResponseField>
<ResponseField name="sessionCapabilities" type={<a href="#sessioncapabilities">SessionCapabilities</a>} >

    - Default: `{}`

</ResponseField>

## <span class="font-mono">Annotations</span>

客户端的可选注释。客户端可以使用注释来告知对象如何使用或显示。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="audience" type={<><span><a href="#role">Role[]</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="lastModified" type={"string | null"} >
</ResponseField>
<ResponseField name="priority" type={"number | null"} >
</ResponseField>

## <span class="font-mono">AudioContent</span>

Audio provided to or from an LLM.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="data" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string"} required>
</ResponseField>

## <span class="font-mono">AuthMethod</span>

描述可用的认证方法。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="description" type={"string | null"} >
  可选描述，提供关于此认证方法的更多详细信息。
</ResponseField>
<ResponseField name="id" type={"string"} required>
  此认证方法的唯一标识符。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  认证方法的人类可读名称。
</ResponseField>

## <span class="font-mono">AvailableCommand</span>

命令的信息。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="description" type={"string"} required>
  命令功能的人类可读描述。
</ResponseField>
<ResponseField name="input" type={<><span><a href="#availablecommandinput">AvailableCommandInput</a></span><span> | null</span></>} >
  Input for the command if required
</ResponseField>
<ResponseField name="name" type={"string"} required>
  命令名称（例如create_plan、research_codebase）。
</ResponseField>

## <span class="font-mono">AvailableCommandInput</span>

The input specification for a command.

**Type:** Union

<ResponseField name="unstructured">
命令名称后输入的所有文本都作为输入提供。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="hint" type={"string"} required>
  A hint to display when the input hasn't been provided yet
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">AvailableCommandsUpdate</span>

可用命令已准备就绪或已更改

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="availableCommands" type={<a href="#availablecommand">AvailableCommand[]</a>} required>
  代理可以执行的命令
</ResponseField>

## <span class="font-mono">BlobResourceContents</span>

二进制资源内容。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="blob" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

## <span class="font-mono">ClientCapabilities</span>

客户端支持的能力。

在初始化期间广告，以告知代理可用的功能和方法。

查看协议文档：[Client Capabilities](https://agentclientprotocol.com/protocol/initialization#client-capabilities)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="fs" type={<a href="#filesystemcapability">FileSystemCapability</a>} >
  客户端支持的文件系统能力。决定代理可以请求哪些文件操作。

    - Default: `{"readTextFile":false,"writeTextFile":false}`

</ResponseField>
<ResponseField name="terminal" type={"boolean"} >
  客户端是否支持所有 terminal/* 方法。

    - Default: `false`

</ResponseField>

## <span class="font-mono">Content</span>

标准内容块（文本、图像、资源）。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  实际的内容块。
</ResponseField>

## <span class="font-mono">ContentBlock</span>

内容块表示代理客户端协议中的可显示信息。

它们提供了一种结构化方式来处理各种面向用户的内容类型—whether
it's text from language models, images for analysis, or embedded resources for context.

Content blocks appear in:

- User prompts sent via `session/prompt`
- Language model output streamed through `session/update` notifications
- Progress updates and results from tool calls

This structure is compatible with the Model Context Protocol (MCP), enabling
agents to seamlessly forward content from MCP tool outputs without transformation.

查看协议文档：[Content](https://agentclientprotocol.com/protocol/content)

**Type:** Union

<ResponseField name="text" type="object">
文本内容。可以是纯文本或Markdown格式。

所有代理必须在提示中支持文本内容块。
Clients SHOULD render this text as Markdown.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="text" type={"string"} required>
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="image" type="object">
用于视觉上下文或分析的图像。

在提示中包含时需要 image 提示能力。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="data" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string"} required>
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>
<ResponseField name="uri" type={"string | null"} >
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="audio" type="object">
用于转录或分析的音频数据。

在提示中包含时需要 audio 提示能力。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="data" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string"} required>
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="resource_link" type="object">
代理可以访问的资源的引用。

所有代理必须在提示中支持资源链接。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="description" type={"string | null"} >
</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="name" type={"string"} required>
</ResponseField>
<ResponseField name="size" type={"integer | null"} >
</ResponseField>
<ResponseField name="title" type={"string | null"} >
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="resource" type="object">
直接嵌入消息中的完整资源内容。

首选用于包含上下文，因为它避免了额外的往返。

在提示中包含时需要 embeddedContext 提示能力。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="resource" type={<a href="#embeddedresourceresource">EmbeddedResourceResource</a>} required>
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">ContentChunk</span>

流式内容项

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  单个内容项
</ResponseField>

## <span class="font-mono">CurrentModeUpdate</span>

会话的当前模式已更改

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="currentModeId" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  当前模式的ID
</ResponseField>

## <span class="font-mono">Diff</span>

表示文件修改的差异。

以适合客户端UI显示的格式显示文件的更改。

查看协议文档：[Content](https://agentclientprotocol.com/protocol/tool-calls#content)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="newText" type={"string"} required>
  修改后的新内容。
</ResponseField>
<ResponseField name="oldText" type={"string | null"} >
  原始内容（新文件为None）。
</ResponseField>
<ResponseField name="path" type={"string"} required>
  正在修改的文件路径。
</ResponseField>

## <span class="font-mono">EmbeddedResource</span>

资源的内容，嵌入到提示或工具调用结果中。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="resource" type={<a href="#embeddedresourceresource">EmbeddedResourceResource</a>} required>
</ResponseField>

## <span class="font-mono">EmbeddedResourceResource</span>

Resource content that can be embedded in a message.

**Type:** Union

<ResponseField name="TextResourceContents">
{""}

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="text" type={"string"} required>
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="BlobResourceContents">
{""}

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="blob" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">EnvVariable</span>

启动MCP服务器时设置的环境变量。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="name" type={"string"} required>
  环境变量名称。
</ResponseField>
<ResponseField name="value" type={"string"} required>
  环境变量的值。
</ResponseField>

## <span class="font-mono">Error</span>

JSON-RPC错误对象。

Represents an error that occurred during method execution, following the
JSON-RPC 2.0 error object specification with optional additional data.

查看协议文档：[JSON-RPC Error Object](https://www.jsonrpc.org/specification#error_object)

**Type:** Object

**Properties:**

<ResponseField name="code" type={<a href="#errorcode">ErrorCode</a>} required>
  表示发生的错误类型的数字。 This must be an integer as
  defined in the JSON-RPC specification.
</ResponseField>
<ResponseField name="data" type={"object"}>
  Optional primitive or structured value that contains additional information
  about the error. This may include debugging information or context-specific
  details.
</ResponseField>
<ResponseField name="message" type={"string"} required>
  提供错误简短描述的字符串。 The message should be
  limited to a concise single sentence.
</ResponseField>

## <span class="font-mono">ErrorCode</span>

常见JSON-RPC和ACP特定错误的预定义错误代码。

These codes follow the JSON-RPC 2.0 specification for standard errors
and use the reserved range (-32000 to -32099) for protocol-specific errors.

**Type:** Union

<ResponseField name="-32700" type="int32">
  解析错误：服务器收到无效JSON。 An error occurred on
  the server while parsing the JSON text.
</ResponseField>

<ResponseField name="-32600" type="int32">
  无效请求：发送的JSON不是有效的请求对象。
</ResponseField>

<ResponseField name="-32601" type="int32">
  方法未找到：方法不存在或不可用。
</ResponseField>

<ResponseField name="-32602" type="int32">
  无效参数：无效的方法参数。
</ResponseField>

<ResponseField name="-32603" type="int32">
  内部错误：内部JSON-RPC错误。 Reserved for
  implementation-defined server errors.
</ResponseField>

<ResponseField name="-32000" type="int32">
  **Authentication required**: Authentication is required before this operation
  can be performed.
</ResponseField>

<ResponseField name="-32002" type="int32">
  **Resource not found**: A given resource, such as a file, was not found.
</ResponseField>

<ResponseField name="Other" type="int32">
  其他未定义的错误代码。
</ResponseField>

## <span class="font-mono">ExtNotification</span>

允许代理发送不属于ACP规范的任意通知。
Extension notifications provide a way to send one-way messages for custom functionality
while maintaining protocol compatibility.

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

## <span class="font-mono">ExtRequest</span>

允许发送不属于ACP规范的任意请求。
Extension methods provide a way to add custom functionality while maintaining
protocol compatibility.

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

## <span class="font-mono">ExtResponse</span>

Allows for sending an arbitrary response to an `ExtRequest` that is not part of the ACP spec.
Extension methods provide a way to add custom functionality while maintaining
protocol compatibility.

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

## <span class="font-mono">FileSystemCapability</span>

客户端支持的文件系统能力。
File system capabilities that a client may support.

查看协议文档：[FileSystem](https://agentclientprotocol.com/protocol/initialization#filesystem)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="readTextFile" type={"boolean"} >
  客户端是否支持 fs/read_text_file 请求。

    - Default: `false`

</ResponseField>
<ResponseField name="writeTextFile" type={"boolean"} >
  客户端是否支持 fs/write_text_file 请求。

    - Default: `false`

</ResponseField>

## <span class="font-mono">HttpHeader</span>

向MCP服务器发出请求时要设置的HTTP头。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="name" type={"string"} required>
  HTTP头名称。
</ResponseField>
<ResponseField name="value" type={"string"} required>
  HTTP头的值。
</ResponseField>

## <span class="font-mono">ImageContent</span>

提供给LLM或从LLM获取的图像。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="data" type={"string"} required>
</ResponseField>
<ResponseField name="mimeType" type={"string"} required>
</ResponseField>
<ResponseField name="uri" type={"string | null"} >
</ResponseField>

## <span class="font-mono">Implementation</span>

关于客户端或代理实现的信息。
Describes the name and version of an MCP implementation, with an optional
title for UI representation.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="name" type={"string"} required>
  Intended for programmatic or logical use, but can be used as a display
name fallback if title isn’t present.
</ResponseField>
<ResponseField name="title" type={"string | null"} >
  Intended for UI and end-user contexts — optimized to be human-readable
and easily understood.

如果未提供，名称应用于显示。

</ResponseField>
<ResponseField name="version" type={"string"} required>
  Version of the implementation. Can be displayed to the user or used
for debugging or metrics purposes. (e.g. "1.0.0").
</ResponseField>

## <span class="font-mono">McpCapabilities</span>

代理支持的MCP能力

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="http" type={"boolean"} >
  代理支持 McpServer::Http。

    - Default: `false`

</ResponseField>
<ResponseField name="sse" type={"boolean"} >
  代理支持 McpServer::Sse。

    - Default: `false`

</ResponseField>

## <span class="font-mono">McpServer</span>

Configuration for connecting to an MCP (Model Context Protocol) server.

MCP servers provide tools and context that the agent can use when
processing prompts.

查看协议文档：[MCP Servers](https://agentclientprotocol.com/protocol/session-setup#mcp-servers)

**Type:** Union

<ResponseField name="http" type="object">
HTTP传输配置

Only available when the Agent capabilities indicate `mcp_capabilities.http` is `true`.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="headers" type={<a href="#httpheader">HttpHeader[]</a>} required>
  HTTP headers to set when making requests to the MCP server.
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>
<ResponseField name="url" type={"string"} required>
  MCP服务器的URL。
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="sse" type="object">
SSE传输配置

Only available when the Agent capabilities indicate `mcp_capabilities.sse` is `true`.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="headers" type={<a href="#httpheader">HttpHeader[]</a>} required>
  HTTP headers to set when making requests to the MCP server.
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>
<ResponseField name="url" type={"string"} required>
  MCP服务器的URL。
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="stdio">
Stdio传输配置

所有代理必须支持此传输。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="args" type={<><span>"string"</span><span>[]</span></>} required>
  传递给MCP服务器的命令行参数。
</ResponseField>
<ResponseField name="command" type={"string"} required>
  MCP服务器可执行文件的路径。
</ResponseField>
<ResponseField name="env" type={<a href="#envvariable">EnvVariable[]</a>} required>
  启动MCP服务器时设置的环境变量。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">McpServerHttp</span>

HTTP传输配置 for MCP.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="headers" type={<a href="#httpheader">HttpHeader[]</a>} required>
  HTTP headers to set when making requests to the MCP server.
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>
<ResponseField name="url" type={"string"} required>
  MCP服务器的URL。
</ResponseField>

## <span class="font-mono">McpServerSse</span>

SSE传输配置 for MCP.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="headers" type={<a href="#httpheader">HttpHeader[]</a>} required>
  HTTP headers to set when making requests to the MCP server.
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>
<ResponseField name="url" type={"string"} required>
  MCP服务器的URL。
</ResponseField>

## <span class="font-mono">McpServerStdio</span>

Stdio传输配置 for MCP.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="args" type={<><span>"string"</span><span>[]</span></>} required>
  传递给MCP服务器的命令行参数。
</ResponseField>
<ResponseField name="command" type={"string"} required>
  MCP服务器可执行文件的路径。
</ResponseField>
<ResponseField name="env" type={<a href="#envvariable">EnvVariable[]</a>} required>
  启动MCP服务器时设置的环境变量。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  标识此MCP服务器的人类可读名称。
</ResponseField>

## <span class="font-mono">PermissionOption</span>

请求权限时向用户展示的选项。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="kind" type={<a href="#permissionoptionkind">PermissionOptionKind</a>} required>
  关于此权限选项性质的提示。
</ResponseField>
<ResponseField name="name" type={"string"} required>
  向用户显示的人类可读标签。
</ResponseField>
<ResponseField name="optionId" type={<a href="#permissionoptionid">PermissionOptionId</a>} required>
  此权限选项的唯一标识符。
</ResponseField>

## <span class="font-mono">PermissionOptionId</span>

权限选项的唯一标识符。

**Type:** `string`

## <span class="font-mono">PermissionOptionKind</span>

呈现给用户的权限选项类型。

帮助客户端选择适当的图标和UI处理方式。

**Type:** Union

<ResponseField name="allow_once" type="string">
  仅此次允许此操作。
</ResponseField>

<ResponseField name="allow_always" type="string">
  允许此操作并记住选择。
</ResponseField>

<ResponseField name="reject_once" type="string">
  仅此次拒绝此操作。
</ResponseField>

<ResponseField name="reject_always" type="string">
  拒绝此操作并记住选择。
</ResponseField>

## <span class="font-mono">Plan</span>

完成复杂任务的执行计划。

计划由多个表示单个任务或目标的条目组成。
Agents report plans to clients to provide visibility into their execution strategy.
Plans can evolve during execution as the agent discovers new requirements or completes tasks.

查看协议文档：[Agent Plan](https://agentclientprotocol.com/protocol/agent-plan)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="entries" type={<a href="#planentry">PlanEntry[]</a>} required>
  要完成的任务列表。

When updating a plan, the agent must send a complete list of all entries
with their current status. 客户端在每次更新时替换整个计划。

</ResponseField>

## <span class="font-mono">PlanEntry</span>

执行计划中的单个条目。

Represents a task or goal that the assistant intends to accomplish
as part of fulfilling the user's request.
查看协议文档：[Plan Entries](https://agentclientprotocol.com/protocol/agent-plan#plan-entries)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={"string"} required>
  此任务旨在完成的人类可读描述。
</ResponseField>
<ResponseField name="priority" type={<a href="#planentrypriority">PlanEntryPriority</a>} required>
  此任务的相对重要性。
Used to indicate which tasks are most critical to the overall goal.
</ResponseField>
<ResponseField name="status" type={<a href="#planentrystatus">PlanEntryStatus</a>} required>
  此任务的当前执行状态。
</ResponseField>

## <span class="font-mono">PlanEntryPriority</span>

计划条目的优先级级别。

Used to indicate the relative importance or urgency of different
tasks in the execution plan.
查看协议文档：[Plan Entries](https://agentclientprotocol.com/protocol/agent-plan#plan-entries)

**Type:** Union

<ResponseField name="high" type="string">
  高优先级任务——对整体目标至关重要。
</ResponseField>

<ResponseField name="medium" type="string">
  中优先级任务——重要但非关键。
</ResponseField>

<ResponseField name="low" type="string">
  低优先级任务——锦上添花但非必需。
</ResponseField>

## <span class="font-mono">PlanEntryStatus</span>

执行流程中计划条目的状态。

跟踪每个任务从规划到完成的生命周期。
查看协议文档：[Plan Entries](https://agentclientprotocol.com/protocol/agent-plan#plan-entries)

**Type:** Union

<ResponseField name="pending" type="string">
  任务尚未开始。
</ResponseField>

<ResponseField name="in_progress" type="string">
  任务当前正在处理中。
</ResponseField>

<ResponseField name="completed" type="string">
  任务已成功完成。
</ResponseField>

## <span class="font-mono">PromptCapabilities</span>

代理在 session/prompt 请求中支持的提示能力。

Baseline agent functionality requires support for `ContentBlock::Text`
and `ContentBlock::ResourceLink` in prompt requests.

其他变体必须明确选择加入。
提示请求中不同类型内容的能力。

Indicates which content types beyond the baseline (text and resource links)
the agent can process.

查看协议文档：[Prompt Capabilities](https://agentclientprotocol.com/protocol/initialization#prompt-capabilities)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="audio" type={"boolean"} >
  代理支持 ContentBlock::Audio。

    - Default: `false`

</ResponseField>
<ResponseField name="embeddedContext" type={"boolean"} >
  代理支持在 session/prompt 请求中嵌入上下文。

When enabled, the Client is allowed to include `ContentBlock::Resource`
in prompt requests for pieces of context that are referenced in the message.

    - Default: `false`

</ResponseField>
<ResponseField name="image" type={"boolean"} >
  代理支持 ContentBlock::Image。

    - Default: `false`

</ResponseField>

## <span class="font-mono">ProtocolVersion</span>

协议版本标识符。

此版本仅在重大更改时才会更新。
非重大更改应通过能力引入。

**Type:** `integer (uint16)`

| Constraint | Value   |
| ---------- | ------- |
| Minimum    | `0`     |
| Maximum    | `65535` |

## <span class="font-mono">RequestId</span>

JSON RPC请求ID

An identifier established by the Client that MUST contain a String, Number, or NULL value if included. If it is not included it is assumed to be a notification. The value SHOULD normally not be Null [1] and Numbers SHOULD NOT contain fractional parts [2]

The Server MUST reply with the same value in the Response object if included. 此成员用于关联两个对象之间的上下文。

[1] The use of Null as a value for the id member in a Request object is discouraged, because this specification uses a value of Null for Responses with an unknown id. Also, because JSON-RPC 1.0 uses an id value of Null for Notifications this could cause confusion in handling.

[2] Fractional parts may be problematic, since many decimal fractions cannot be represented exactly as binary fractions.

**Type:** Union

<ResponseField name="null" type="null">
  {""}
</ResponseField>

<ResponseField name="Number" type="int64">
  {""}
</ResponseField>

<ResponseField name="Str" type="string">
  {""}
</ResponseField>

## <span class="font-mono">RequestPermissionOutcome</span>

权限请求的结果。

**Type:** Union

<ResponseField name="cancelled" type="object">
在用户响应之前提示轮次已被取消。

When a client sends a `session/cancel` notification to cancel an ongoing
prompt turn, it MUST respond to all pending `session/request_permission`
requests with this `Cancelled` outcome.

查看协议文档：[Cancellation](https://agentclientprotocol.com/protocol/prompt-turn#cancellation)

<Expandable title="Properties">

<ResponseField name="outcome" type={"string"} required></ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="selected" type="object">
用户选择了提供的选项之一。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="optionId" type={<a href="#permissionoptionid">PermissionOptionId</a>} required>
  用户选择的选项的ID。
</ResponseField>
<ResponseField name="outcome" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">ResourceLink</span>

A resource that the server is capable of reading, included in a prompt or tool call result.

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="description" type={"string | null"} >
</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="name" type={"string"} required>
</ResponseField>
<ResponseField name="size" type={"integer | null"} >
</ResponseField>
<ResponseField name="title" type={"string | null"} >
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

## <span class="font-mono">Role</span>

对话中消息和数据的发送者或接收者。

**Type:** Enumeration

| Value         |
| ------------- |
| `"assistant"` |
| `"user"`      |

## <span class="font-mono">SelectedPermissionOutcome</span>

用户选择了提供的选项之一。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="optionId" type={<a href="#permissionoptionid">PermissionOptionId</a>} required>
  用户选择的选项的ID。
</ResponseField>

## <span class="font-mono">SessionCapabilities</span>

代理支持的会话能力。

As a baseline, all Agents **MUST** support `session/new`, `session/prompt`, `session/cancel`, and `session/update`.

Optionally, they **MAY** support other session methods and notifications by specifying additional capabilities.

Note: `session/load` is still handled by the top-level `load_session` capability. This will be unified in future versions of the protocol.

查看协议文档：[Session Capabilities](https://agentclientprotocol.com/protocol/initialization#session-capabilities)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>

## <span class="font-mono">SessionId</span>

A unique identifier for a conversation session between a client and agent.

Sessions maintain their own context, conversation history, and state,
allowing multiple independent interactions with the same agent.

查看协议文档：[Session ID](https://agentclientprotocol.com/protocol/session-setup#session-id)

**Type:** `string`

## <span class="font-mono">SessionMode</span>

代理可以操作的模式。

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="description" type={"string | null"} >
</ResponseField>
<ResponseField name="id" type={<a href="#sessionmodeid">SessionModeId</a>} required>
</ResponseField>
<ResponseField name="name" type={"string"} required>
</ResponseField>

## <span class="font-mono">SessionModeId</span>

会话模式的唯一标识符。

**Type:** `string`

## <span class="font-mono">SessionModeState</span>

模式集和当前活动的模式。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="availableModes" type={<a href="#sessionmode">SessionMode[]</a>} required>
  代理可以操作的模式集
</ResponseField>
<ResponseField name="currentModeId" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  代理当前的模式。
</ResponseField>

## <span class="font-mono">SessionUpdate</span>

会话处理期间可以发送的不同类型的更新。

These updates provide real-time feedback about the agent's progress.

查看协议文档：[Agent Reports Output](https://agentclientprotocol.com/protocol/prompt-turn#3-agent-reports-output)

**Type:** Union

<ResponseField name="user_message_chunk" type="object">
A chunk of the user's message being streamed.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  单个内容项
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="agent_message_chunk" type="object">
A chunk of the agent's response being streamed.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  单个内容项
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="agent_thought_chunk" type="object">
A chunk of the agent's internal reasoning being streamed.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  单个内容项
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="tool_call" type="object">
已启动新工具调用的通知。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#toolcallcontent">ToolCallContent[]</a>} >
  工具调用产生的内容。
</ResponseField>
<ResponseField name="kind" type={<a href="#toolkind">ToolKind</a>} >
  被调用工具的类别。
帮助客户端选择适当的图标和UI处理方式。
</ResponseField>
<ResponseField name="locations" type={<a href="#toolcalllocation">ToolCallLocation[]</a>} >
  此工具调用影响的文件位置。
Enables "follow-along" features in clients.
</ResponseField>
<ResponseField name="rawInput" type={"object"} >
  发送给工具的原始输入参数。
</ResponseField>
<ResponseField name="rawOutput" type={"object"} >
  工具返回的原始输出。
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>
<ResponseField name="status" type={<a href="#toolcallstatus">ToolCallStatus</a>} >
  工具调用的当前执行状态。
</ResponseField>
<ResponseField name="title" type={"string"} required>
  描述工具正在做什么的人类可读标题。
</ResponseField>
<ResponseField name="toolCallId" type={<a href="#toolcallid">ToolCallId</a>} required>
  会话中此工具调用的唯一标识符。
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="tool_call_update" type="object">
工具调用状态或结果的更新。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<><span><a href="#toolcallcontent">ToolCallContent[]</a></span><span> | null</span></>} >
  替换内容集合。
</ResponseField>
<ResponseField name="kind" type={<><span><a href="#toolkind">ToolKind</a></span><span> | null</span></>} >
  更新工具类型。
</ResponseField>
<ResponseField name="locations" type={<><span><a href="#toolcalllocation">ToolCallLocation[]</a></span><span> | null</span></>} >
  替换位置集合。
</ResponseField>
<ResponseField name="rawInput" type={"object"} >
  更新原始输入。
</ResponseField>
<ResponseField name="rawOutput" type={"object"} >
  更新原始输出。
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>
<ResponseField name="status" type={<><span><a href="#toolcallstatus">ToolCallStatus</a></span><span> | null</span></>} >
  更新执行状态。
</ResponseField>
<ResponseField name="title" type={"string | null"} >
  更新人类可读标题。
</ResponseField>
<ResponseField name="toolCallId" type={<a href="#toolcallid">ToolCallId</a>} required>
  被更新的工具调用的ID。
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="plan" type="object">
The agent's execution plan for complex tasks.
查看协议文档：[Agent Plan](https://agentclientprotocol.com/protocol/agent-plan)

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="entries" type={<a href="#planentry">PlanEntry[]</a>} required>
  要完成的任务列表。

When updating a plan, the agent must send a complete list of all entries
with their current status. 客户端在每次更新时替换整个计划。

</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="available_commands_update" type="object">
可用命令已准备就绪或已更改

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="availableCommands" type={<a href="#availablecommand">AvailableCommand[]</a>} required>
  代理可以执行的命令
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="current_mode_update" type="object">
会话的当前模式已更改

查看协议文档：[Session Modes](https://agentclientprotocol.com/protocol/session-modes)

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="currentModeId" type={<a href="#sessionmodeid">SessionModeId</a>} required>
  当前模式的ID
</ResponseField>
<ResponseField name="sessionUpdate" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">StopReason</span>

代理停止处理提示轮次的原因。

查看协议文档：[Stop Reasons](https://agentclientprotocol.com/protocol/prompt-turn#stop-reasons)

**Type:** Union

<ResponseField name="end_turn" type="string">
  轮次成功结束。
</ResponseField>

<ResponseField name="max_tokens" type="string">
  轮次因代理达到最大token数而结束。
</ResponseField>

<ResponseField name="max_turn_requests" type="string">
  The turn ended because the agent reached the maximum number of allowed agent
  requests between user turns.
</ResponseField>

<ResponseField name="refusal" type="string">
  轮次因代理拒绝继续而结束。 The user prompt and
  everything that comes after it won't be included in the next prompt, so this
  should be reflected in the UI.
</ResponseField>

<ResponseField name="cancelled" type="string">
The turn was cancelled by the client via `session/cancel`.

This stop reason MUST be returned when the client sends a `session/cancel`
notification, even if the cancellation causes exceptions in underlying operations.
Agents should catch these exceptions and return this semantically meaningful
response to confirm successful cancellation.

</ResponseField>

## <span class="font-mono">Terminal</span>

Embed a terminal created with `terminal/create` by its id.

The terminal must be added before calling `terminal/release`.

查看协议文档：[Terminal](https://agentclientprotocol.com/protocol/terminals)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
</ResponseField>

## <span class="font-mono">TerminalExitStatus</span>

终端命令的退出状态。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="exitCode" type={"integer | null"} >
  进程退出代码（如果被信号终止可能为null）。

    - Minimum: `0`

</ResponseField>
<ResponseField name="signal" type={"string | null"} >
  终止进程的信号（如果正常退出可能为null）。
</ResponseField>

## <span class="font-mono">TextContent</span>

提供给LLM或从LLM获取的文本。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="annotations" type={<><span><a href="#annotations">Annotations</a></span><span> | null</span></>} >
</ResponseField>
<ResponseField name="text" type={"string"} required>
</ResponseField>

## <span class="font-mono">TextResourceContents</span>

基于文本的资源内容。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="mimeType" type={"string | null"} >
</ResponseField>
<ResponseField name="text" type={"string"} required>
</ResponseField>
<ResponseField name="uri" type={"string"} required>
</ResponseField>

## <span class="font-mono">ToolCall</span>

表示语言模型请求的工具调用。

Tool calls are actions that the agent executes on behalf of the language model,
such as reading files, executing code, or fetching data from external sources.

查看协议文档：[Tool Calls](https://agentclientprotocol.com/protocol/tool-calls)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#toolcallcontent">ToolCallContent[]</a>} >
  工具调用产生的内容。
</ResponseField>
<ResponseField name="kind" type={<a href="#toolkind">ToolKind</a>} >
  被调用工具的类别。
帮助客户端选择适当的图标和UI处理方式。
</ResponseField>
<ResponseField name="locations" type={<a href="#toolcalllocation">ToolCallLocation[]</a>} >
  此工具调用影响的文件位置。
Enables "follow-along" features in clients.
</ResponseField>
<ResponseField name="rawInput" type={"object"} >
  发送给工具的原始输入参数。
</ResponseField>
<ResponseField name="rawOutput" type={"object"} >
  工具返回的原始输出。
</ResponseField>
<ResponseField name="status" type={<a href="#toolcallstatus">ToolCallStatus</a>} >
  工具调用的当前执行状态。
</ResponseField>
<ResponseField name="title" type={"string"} required>
  描述工具正在做什么的人类可读标题。
</ResponseField>
<ResponseField name="toolCallId" type={<a href="#toolcallid">ToolCallId</a>} required>
  会话中此工具调用的唯一标识符。
</ResponseField>

## <span class="font-mono">ToolCallContent</span>

工具调用产生的内容。

Tool calls can produce different types of content including
standard content blocks (text, images) or file diffs.

查看协议文档：[Content](https://agentclientprotocol.com/protocol/tool-calls#content)

**Type:** Union

<ResponseField name="content" type="object">
标准内容块（文本、图像、资源）。

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<a href="#contentblock">ContentBlock</a>} required>
  实际的内容块。
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="diff" type="object">
File modification shown as a diff.

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="newText" type={"string"} required>
  修改后的新内容。
</ResponseField>
<ResponseField name="oldText" type={"string | null"} >
  原始内容（新文件为None）。
</ResponseField>
<ResponseField name="path" type={"string"} required>
  正在修改的文件路径。
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

<ResponseField name="terminal" type="object">
Embed a terminal created with `terminal/create` by its id.

The terminal must be added before calling `terminal/release`.

查看协议文档：[Terminal](https://agentclientprotocol.com/protocol/terminals)

<Expandable title="Properties">

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="terminalId" type={"string"} required>
</ResponseField>
<ResponseField name="type" type={"string"} required>
</ResponseField>

</Expandable>
</ResponseField>

## <span class="font-mono">ToolCallId</span>

会话中工具调用的唯一标识符。

**Type:** `string`

## <span class="font-mono">ToolCallLocation</span>

被工具访问或修改的文件位置。

Enables clients to implement "follow-along" features that track
which files the agent is working with in real-time.

查看协议文档：[Following the Agent](https://agentclientprotocol.com/protocol/tool-calls#following-the-agent)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="line" type={"integer | null"} >
  文件中的可选行号。

    - Minimum: `0`

</ResponseField>
<ResponseField name="path" type={"string"} required>
  正在访问或修改的文件路径。
</ResponseField>

## <span class="font-mono">ToolCallStatus</span>

工具调用的执行状态。

Tool calls progress through different statuses during their lifecycle.

查看协议文档：[Status](https://agentclientprotocol.com/protocol/tool-calls#status)

**Type:** Union

<ResponseField name="pending" type="string">
  The tool call hasn't started running yet because the input is either streaming
  or we're awaiting approval.
</ResponseField>

<ResponseField name="in_progress" type="string">
  工具调用当前正在运行。
</ResponseField>

<ResponseField name="completed" type="string">
  工具调用成功完成。
</ResponseField>

<ResponseField name="failed" type="string">
  工具调用失败并出现错误。
</ResponseField>

## <span class="font-mono">ToolCallUpdate</span>

对现有工具调用的更新。

用于在工具执行时报告进度和结果。 All fields except
the tool call ID are optional - only changed fields need to be included.

查看协议文档：[Updating](https://agentclientprotocol.com/protocol/tool-calls#updating)

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="content" type={<><span><a href="#toolcallcontent">ToolCallContent[]</a></span><span> | null</span></>} >
  替换内容集合。
</ResponseField>
<ResponseField name="kind" type={<><span><a href="#toolkind">ToolKind</a></span><span> | null</span></>} >
  更新工具类型。
</ResponseField>
<ResponseField name="locations" type={<><span><a href="#toolcalllocation">ToolCallLocation[]</a></span><span> | null</span></>} >
  替换位置集合。
</ResponseField>
<ResponseField name="rawInput" type={"object"} >
  更新原始输入。
</ResponseField>
<ResponseField name="rawOutput" type={"object"} >
  更新原始输出。
</ResponseField>
<ResponseField name="status" type={<><span><a href="#toolcallstatus">ToolCallStatus</a></span><span> | null</span></>} >
  更新执行状态。
</ResponseField>
<ResponseField name="title" type={"string | null"} >
  更新人类可读标题。
</ResponseField>
<ResponseField name="toolCallId" type={<a href="#toolcallid">ToolCallId</a>} required>
  被更新的工具调用的ID。
</ResponseField>

## <span class="font-mono">ToolKind</span>

可以调用的工具类别。

Tool kinds help clients choose appropriate icons and optimize how they
display tool execution progress.

查看协议文档：[Creating](https://agentclientprotocol.com/protocol/tool-calls#creating)

**Type:** Union

<ResponseField name="read" type="string">
  读取文件或数据。
</ResponseField>

<ResponseField name="edit" type="string">
  修改文件或内容。
</ResponseField>

<ResponseField name="delete" type="string">
  删除文件或数据。
</ResponseField>

<ResponseField name="move" type="string">
  移动或重命名文件。
</ResponseField>

<ResponseField name="search" type="string">
  搜索信息。
</ResponseField>

<ResponseField name="execute" type="string">
  运行命令或代码。
</ResponseField>

<ResponseField name="think" type="string">
  内部推理或规划。
</ResponseField>

<ResponseField name="fetch" type="string">
  检索外部数据。
</ResponseField>

<ResponseField name="switch_mode" type="string">
  切换当前会话模式。
</ResponseField>

<ResponseField name="other" type="string">
  其他工具类型（默认）。
</ResponseField>

## <span class="font-mono">UnstructuredCommandInput</span>

命令名称后输入的所有文本都作为输入提供。

**Type:** Object

**Properties:**

<ResponseField name="_meta" type={"object | null"} >
  _meta属性由ACP保留，允许客户端和代理在交互中附加额外的元数据。实现不得对这些键的值做出假设。

查看协议文档：[Extensibility](https://agentclientprotocol.com/protocol/extensibility)

</ResponseField>
<ResponseField name="hint" type={"string"} required>
  A hint to display when the input hasn't been provided yet
</ResponseField>
